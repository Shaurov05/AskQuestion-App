{"remainingRequest":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\src\\views\\Question.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\src\\views\\Question.vue","mtime":1604162745356},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IEFuc3dlckNvbXBvbmVudCBmcm9tICJAL2NvbXBvbmVudHMvQW5zd2VyLnZ1ZSI7DQppbXBvcnQgUXVlc3Rpb25BY3Rpb25zIGZyb20gIkAvY29tcG9uZW50cy9RdWVzdGlvbkFjdGlvbi52dWUiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJRdWVzdGlvbiIsDQogIHByb3BzOiB7DQogICAgc2x1Zzogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgfSwNCg0KICB9LA0KDQogIGNvbXBvbmVudHMgOiB7DQogICAgQW5zd2VyQ29tcG9uZW50LA0KICAgIFF1ZXN0aW9uQWN0aW9ucywNCiAgfSwNCg0KICBkYXRhKCl7DQogICAgcmV0dXJuIHsNCiAgICAgIHF1ZXN0aW9uOiB7fSwNCiAgICAgIGFuc3dlcnM6IFtdLA0KICAgICAgbmV3QW5zd2VyQm9keTogbnVsbCwNCiAgICAgIGVycm9yOiBudWxsLA0KICAgICAgdXNlckhhc0Fuc3dlcmVkOiBmYWxzZSwNCiAgICAgIHNob3dGb3JtOiBmYWxzZSwNCiAgICAgIGxvYWRpbmdBbnN3ZXJzOiBmYWxzZSwNCiAgICAgIG5leHQ6IG51bGwsDQogICAgICByZXF1ZXN0VXNlcjogbnVsbCwNCg0KICAgIH0NCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIGlzUXVlc3Rpb25BdXRob3IoKSB7DQogICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi5hdXRob3IgPT09IHRoaXMucmVxdWVzdFVzZXI7DQogICAgfQ0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBzZXRQYWdlVGl0bGUodGl0bGUpew0KICAgICAgZG9jdW1lbnQudGl0bGUgPSB0aXRsZTsNCiAgICB9LA0KICAgIHNldFJlcXVlc3RVc2VyKCkgew0KICAgICAgdGhpcy5yZXF1ZXN0VXNlciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKTsNCiAgICB9LA0KICAgIGdldFF1ZXN0aW9uRGF0YSgpew0KICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcXVlc3Rpb25zLyR7dGhpcy5zbHVnfS9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkNCiAgICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24gPSBkYXRhOw0KICAgICAgICAgICAgICB0aGlzLnVzZXJIYXNBbnN3ZXJlZCA9IGRhdGEudXNlcl9oYXNfYW5zd2VyZWQ7DQogICAgICAgICAgICAgIHRoaXMuc2V0UGFnZVRpdGxlKHRoaXMucXVlc3Rpb24uY29udGVudCkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24gPSBudWxsOw0KICAgICAgICAgICAgICB0aGlzLnNldFBhZ2VUaXRsZSgiNDA0IC0gUGFnZSBOb3QgRm91bmQiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgfSwNCg0KICAgIGdldFF1ZXN0aW9uQW5zd2VycygpIHsNCiAgICAgIC8vIGdldCBhIHBhZ2Ugb2YgYW5zd2VycyBmb3IgYSBzaW5nbGUgcXVlc3Rpb24gZnJvbSB0aGUgUkVTVCBBUEkncyBwYWdpbmF0ZWQgJ1F1ZXN0aW9ucyBFbmRwb2ludCcNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3F1ZXN0aW9ucy8ke3RoaXMuc2x1Z30vYW5zd2Vycy9gOw0KICAgICAgaWYgKHRoaXMubmV4dCl7DQogICAgICAgIGVuZHBvaW50ID0gdGhpcy5uZXh0Ow0KICAgICAgfQ0KICAgICAgdGhpcy5sb2FkaW5nQW5zd2VycyA9IHRydWU7DQoNCiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpDQogICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuYW5zd2Vycy5wdXNoKC4uLmRhdGEucmVzdWx0cyk7DQogICAgICAgICAgdGhpcy5sb2FkaW5nQW5zd2VycyA9IGZhbHNlOw0KDQogICAgICAgICAgaWYoZGF0YS5uZXh0KXsNCiAgICAgICAgICAgIHRoaXMubmV4dCA9IGRhdGEubmV4dDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgfSwNCg0KICAgIG9uU3VibWl0KCkgew0KICAgICAgLy8gVGVsbCB0aGUgUkVTVCBBUEkgdG8gY3JlYXRlIGEgbmV3IGFuc3dlciBmb3IgdGhpcyBxdWVzdGlvbiBiYXNlZCBvbiB0aGUgdXNlciBpbnB1dCwgdGhlbiB1cGRhdGUgc29tZSBkYXRhIHByb3BlcnRpZXMNCiAgICAgIGlmICh0aGlzLm5ld0Fuc3dlckJvZHkpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcXVlc3Rpb25zLyR7dGhpcy5zbHVnfS9hbnN3ZXIvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBPU1QiLCB7IGJvZHk6IHRoaXMubmV3QW5zd2VyQm9keSB9KQ0KICAgICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgLy8gVGhlIHVuc2hpZnQoKSBtZXRob2QgaXMgdXNlZCB0byBhZGQgb25lDQogICAgICAgICAgICAvLyBvciBtb3JlIGVsZW1lbnRzIHRvIHRoZSBiZWdpbm5pbmcgb2YgYW4NCiAgICAgICAgICAgIC8vIGFycmF5IGFuZCByZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkuDQogICAgICAgICAgICB0aGlzLmFuc3dlcnMudW5zaGlmdChkYXRhKQ0KICAgICAgICAgIH0pDQogICAgICAgIHRoaXMubmV3QW5zd2VyQm9keSA9IG51bGw7DQogICAgICAgIHRoaXMuc2hvd0Zvcm0gPSBmYWxzZTsNCiAgICAgICAgdGhpcy51c2VySGFzQW5zd2VyZWQgPSB0cnVlOw0KICAgICAgICBpZiAodGhpcy5lcnJvcikgew0KICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVycm9yID0gIllvdSBjYW4ndCBzZW5kIGFuIGVtcHR5IGFuc3dlciEiOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBhc3luYyBkZWxldGVBbnN3ZXIoYW5zd2VyKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9hbnN3ZXJzLyR7YW5zd2VyLmlkfS9gOw0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgYXBpU2VydmljZShlbmRwb2ludCwgIkRFTEVURSIpDQogICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuYW5zd2VycywgdGhpcy5hbnN3ZXJzLmluZGV4T2YoYW5zd2VyKSkNCiAgICAgICAgICB0aGlzLnVzZXJIYXNBbnN3ZXJlZCA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICBjYXRjaChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgfQ0KICAgIH0NCg0KICB9LA0KDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRRdWVzdGlvbkRhdGEoKQ0KICAgIHRoaXMuZ2V0UXVlc3Rpb25BbnN3ZXJzKCkNCiAgICB0aGlzLnNldFJlcXVlc3RVc2VyKCkNCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnF1ZXN0aW9ucykNCiAgfQ0KfQ0KDQo="},{"version":3,"sources":["Question.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Question.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\r\n<div class=\"single-question mt-2\">\r\n  <div v-if=\"question\" class=\"container\">\r\n    <h1> {{ question.content }} </h1>\r\n    <QuestionActions\r\n        v-if=\"isQuestionAuthor\"\r\n        :slug=\"question.slug\"\r\n    />\r\n    <p class=\"mb-0\"> posted by:\r\n      <span class=\"author-name\"> {{ question.author }} </span>\r\n    </p>\r\n\r\n    <p class=\"mb-0\">\r\n      {{ question.created_at }}\r\n    </p>\r\n    <hr>\r\n    <div v-if=\"userHasAnswered\">\r\n        <p class=\"answer-added\"> You've written an answer! </p>\r\n    </div>\r\n    <div v-else-if=\"showForm\">\r\n      <form class=\"card\" @submit.prevent=\"onSubmit\">\r\n        <div class=\"card-header px-3\">\r\n          Answer the Question\r\n        </div>\r\n        <div class=\"card-block\">\r\n          <textarea\r\n            v-model=\"newAnswerBody\"\r\n            class=\"form-control\"\r\n            placeholder=\"Share your knowledge\"\r\n            rows=\"5\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div card=\"card-footer px-3 mt-2\">\r\n          <br>\r\n          <button class=\"btn btn-sm btn-success\"\r\n              > Submit Your Answer\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <p v-if=\"error\" class=\"error mt-2\"> {{ error }} </p>\r\n    </div>\r\n    <div v-else>\r\n      <button\r\n          class=\"btn btn-sm btn-success\"\r\n          @click=\"showForm = true\"\r\n          > Answer the Question\r\n\r\n      </button>\r\n    </div>\r\n    <hr>\r\n  </div>\r\n\r\n  <div v-else>\r\n    <h1 class=\"error text-center\"> <br><br><br> 404 - Question Not Found </h1>\r\n  </div>\r\n\r\n  <div v-if=\"question\" class=\"container\">\r\n      <AnswerComponent\r\n        v-for=\"answer in answers\"\r\n        :key=\"answer.id\"\r\n        :requestUser=\"requestUser\"\r\n        :answer=\"answer\"\r\n        @delete-answer=\"deleteAnswer\"\r\n      />\r\n\r\n    <div class=\"my-4\">\r\n      <p v-show=\"loadingAnswers\">...loading...  </p>\r\n      <button\r\n          v-show=\"next\"\r\n          @click=\"getQuestionAnswers\"\r\n          class=\"btn btn-sm btn-outline-success\"\r\n      > Load More </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AnswerComponent from \"@/components/Answer.vue\";\r\nimport QuestionActions from \"@/components/QuestionAction.vue\";\r\n\r\nexport default {\r\n  name: \"Question\",\r\n  props: {\r\n    slug: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n\r\n  },\r\n\r\n  components : {\r\n    AnswerComponent,\r\n    QuestionActions,\r\n  },\r\n\r\n  data(){\r\n    return {\r\n      question: {},\r\n      answers: [],\r\n      newAnswerBody: null,\r\n      error: null,\r\n      userHasAnswered: false,\r\n      showForm: false,\r\n      loadingAnswers: false,\r\n      next: null,\r\n      requestUser: null,\r\n\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    isQuestionAuthor() {\r\n      return this.question.author === this.requestUser;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setPageTitle(title){\r\n      document.title = title;\r\n    },\r\n    setRequestUser() {\r\n      this.requestUser = window.localStorage.getItem(\"username\");\r\n    },\r\n    getQuestionData(){\r\n      let endpoint = `/api/questions/${this.slug}/`;\r\n      apiService(endpoint)\r\n          .then(data => {\r\n            if (data) {\r\n              this.question = data;\r\n              this.userHasAnswered = data.user_has_answered;\r\n              this.setPageTitle(this.question.content)\r\n            } else {\r\n              this.question = null;\r\n              this.setPageTitle(\"404 - Page Not Found\")\r\n            }\r\n          })\r\n    },\r\n\r\n    getQuestionAnswers() {\r\n      // get a page of answers for a single question from the REST API's paginated 'Questions Endpoint'\r\n      let endpoint = `/api/questions/${this.slug}/answers/`;\r\n      if (this.next){\r\n        endpoint = this.next;\r\n      }\r\n      this.loadingAnswers = true;\r\n\r\n      apiService(endpoint)\r\n        .then(data => {\r\n          this.answers.push(...data.results);\r\n          this.loadingAnswers = false;\r\n\r\n          if(data.next){\r\n            this.next = data.next;\r\n          } else {\r\n            this.next = null;\r\n          }\r\n        })\r\n    },\r\n\r\n    onSubmit() {\r\n      // Tell the REST API to create a new answer for this question based on the user input, then update some data properties\r\n      if (this.newAnswerBody) {\r\n        let endpoint = `/api/questions/${this.slug}/answer/`;\r\n        apiService(endpoint, \"POST\", { body: this.newAnswerBody })\r\n          .then(data => {\r\n            // The unshift() method is used to add one\r\n            // or more elements to the beginning of an\r\n            // array and return the length of the array.\r\n            this.answers.unshift(data)\r\n          })\r\n        this.newAnswerBody = null;\r\n        this.showForm = false;\r\n        this.userHasAnswered = true;\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"You can't send an empty answer!\";\r\n      }\r\n    },\r\n\r\n    async deleteAnswer(answer) {\r\n      let endpoint = `/api/answers/${answer.id}/`;\r\n      try {\r\n        await apiService(endpoint, \"DELETE\")\r\n          this.$delete(this.answers, this.answers.indexOf(answer))\r\n          this.userHasAnswered = false;\r\n        }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  created() {\r\n    this.getQuestionData()\r\n    this.getQuestionAnswers()\r\n    this.setRequestUser()\r\n    // console.log(this.questions)\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.author-name{\r\n  font-weigh: bold;\r\n  color: #DC3545;\r\n}\r\n.answer-added {\r\n  font-weight: bold;\r\n  color: green;\r\n}\r\n.error {\r\n  font-weight: bold;\r\n  color: red;\r\n}\r\n</style>\r\n"]}]}