{"remainingRequest":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\src\\views\\Question.vue?vue&type=style&index=0&id=29b06b20&scoped=true&lang=css&","dependencies":[{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\src\\views\\Question.vue","mtime":1604162745356},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmF1dGhvci1uYW1lew0KICBmb250LXdlaWdoOiBib2xkOw0KICBjb2xvcjogI0RDMzU0NTsNCn0NCi5hbnN3ZXItYWRkZWQgew0KICBmb250LXdlaWdodDogYm9sZDsNCiAgY29sb3I6IGdyZWVuOw0KfQ0KLmVycm9yIHsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGNvbG9yOiByZWQ7DQp9DQo="},{"version":3,"sources":["Question.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Question.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\r\n<div class=\"single-question mt-2\">\r\n  <div v-if=\"question\" class=\"container\">\r\n    <h1> {{ question.content }} </h1>\r\n    <QuestionActions\r\n        v-if=\"isQuestionAuthor\"\r\n        :slug=\"question.slug\"\r\n    />\r\n    <p class=\"mb-0\"> posted by:\r\n      <span class=\"author-name\"> {{ question.author }} </span>\r\n    </p>\r\n\r\n    <p class=\"mb-0\">\r\n      {{ question.created_at }}\r\n    </p>\r\n    <hr>\r\n    <div v-if=\"userHasAnswered\">\r\n        <p class=\"answer-added\"> You've written an answer! </p>\r\n    </div>\r\n    <div v-else-if=\"showForm\">\r\n      <form class=\"card\" @submit.prevent=\"onSubmit\">\r\n        <div class=\"card-header px-3\">\r\n          Answer the Question\r\n        </div>\r\n        <div class=\"card-block\">\r\n          <textarea\r\n            v-model=\"newAnswerBody\"\r\n            class=\"form-control\"\r\n            placeholder=\"Share your knowledge\"\r\n            rows=\"5\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div card=\"card-footer px-3 mt-2\">\r\n          <br>\r\n          <button class=\"btn btn-sm btn-success\"\r\n              > Submit Your Answer\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <p v-if=\"error\" class=\"error mt-2\"> {{ error }} </p>\r\n    </div>\r\n    <div v-else>\r\n      <button\r\n          class=\"btn btn-sm btn-success\"\r\n          @click=\"showForm = true\"\r\n          > Answer the Question\r\n\r\n      </button>\r\n    </div>\r\n    <hr>\r\n  </div>\r\n\r\n  <div v-else>\r\n    <h1 class=\"error text-center\"> <br><br><br> 404 - Question Not Found </h1>\r\n  </div>\r\n\r\n  <div v-if=\"question\" class=\"container\">\r\n      <AnswerComponent\r\n        v-for=\"answer in answers\"\r\n        :key=\"answer.id\"\r\n        :requestUser=\"requestUser\"\r\n        :answer=\"answer\"\r\n        @delete-answer=\"deleteAnswer\"\r\n      />\r\n\r\n    <div class=\"my-4\">\r\n      <p v-show=\"loadingAnswers\">...loading...  </p>\r\n      <button\r\n          v-show=\"next\"\r\n          @click=\"getQuestionAnswers\"\r\n          class=\"btn btn-sm btn-outline-success\"\r\n      > Load More </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AnswerComponent from \"@/components/Answer.vue\";\r\nimport QuestionActions from \"@/components/QuestionAction.vue\";\r\n\r\nexport default {\r\n  name: \"Question\",\r\n  props: {\r\n    slug: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n\r\n  },\r\n\r\n  components : {\r\n    AnswerComponent,\r\n    QuestionActions,\r\n  },\r\n\r\n  data(){\r\n    return {\r\n      question: {},\r\n      answers: [],\r\n      newAnswerBody: null,\r\n      error: null,\r\n      userHasAnswered: false,\r\n      showForm: false,\r\n      loadingAnswers: false,\r\n      next: null,\r\n      requestUser: null,\r\n\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    isQuestionAuthor() {\r\n      return this.question.author === this.requestUser;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setPageTitle(title){\r\n      document.title = title;\r\n    },\r\n    setRequestUser() {\r\n      this.requestUser = window.localStorage.getItem(\"username\");\r\n    },\r\n    getQuestionData(){\r\n      let endpoint = `/api/questions/${this.slug}/`;\r\n      apiService(endpoint)\r\n          .then(data => {\r\n            if (data) {\r\n              this.question = data;\r\n              this.userHasAnswered = data.user_has_answered;\r\n              this.setPageTitle(this.question.content)\r\n            } else {\r\n              this.question = null;\r\n              this.setPageTitle(\"404 - Page Not Found\")\r\n            }\r\n          })\r\n    },\r\n\r\n    getQuestionAnswers() {\r\n      // get a page of answers for a single question from the REST API's paginated 'Questions Endpoint'\r\n      let endpoint = `/api/questions/${this.slug}/answers/`;\r\n      if (this.next){\r\n        endpoint = this.next;\r\n      }\r\n      this.loadingAnswers = true;\r\n\r\n      apiService(endpoint)\r\n        .then(data => {\r\n          this.answers.push(...data.results);\r\n          this.loadingAnswers = false;\r\n\r\n          if(data.next){\r\n            this.next = data.next;\r\n          } else {\r\n            this.next = null;\r\n          }\r\n        })\r\n    },\r\n\r\n    onSubmit() {\r\n      // Tell the REST API to create a new answer for this question based on the user input, then update some data properties\r\n      if (this.newAnswerBody) {\r\n        let endpoint = `/api/questions/${this.slug}/answer/`;\r\n        apiService(endpoint, \"POST\", { body: this.newAnswerBody })\r\n          .then(data => {\r\n            // The unshift() method is used to add one\r\n            // or more elements to the beginning of an\r\n            // array and return the length of the array.\r\n            this.answers.unshift(data)\r\n          })\r\n        this.newAnswerBody = null;\r\n        this.showForm = false;\r\n        this.userHasAnswered = true;\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"You can't send an empty answer!\";\r\n      }\r\n    },\r\n\r\n    async deleteAnswer(answer) {\r\n      let endpoint = `/api/answers/${answer.id}/`;\r\n      try {\r\n        await apiService(endpoint, \"DELETE\")\r\n          this.$delete(this.answers, this.answers.indexOf(answer))\r\n          this.userHasAnswered = false;\r\n        }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  created() {\r\n    this.getQuestionData()\r\n    this.getQuestionAnswers()\r\n    this.setRequestUser()\r\n    // console.log(this.questions)\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.author-name{\r\n  font-weigh: bold;\r\n  color: #DC3545;\r\n}\r\n.answer-added {\r\n  font-weight: bold;\r\n  color: green;\r\n}\r\n.error {\r\n  font-weight: bold;\r\n  color: red;\r\n}\r\n</style>\r\n"]}]}