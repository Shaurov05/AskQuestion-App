{"remainingRequest":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\src\\views\\AnswerEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\src\\views\\AnswerEditor.vue","mtime":1604155774990},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Shaurov\\rest projects\\rest_course\\QuestionTime\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovU2hhdXJvdi9yZXN0IHByb2plY3RzL3Jlc3RfY291cnNlL1F1ZXN0aW9uVGltZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQW5zd2VyRWRpdG9yIiwKICBwcm9wczogewogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHByZXZpb3VzQW5zd2VyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBxdWVzdGlvblNsdWc6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFuc3dlckJvZHk6IHRoaXMucHJldmlvdXNBbnN3ZXIsCiAgICAgIGVycm9yOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuYW5zd2VyQm9keSkgewogICAgICAgIHZhciBlbmRwb2ludCA9ICIvYXBpL2Fuc3dlcnMvIi5jb25jYXQodGhpcy5pZCwgIi8iKTsKICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUFVUIiwgewogICAgICAgICAgYm9keTogdGhpcy5hbnN3ZXJCb2R5CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAicXVlc3Rpb24iLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBzbHVnOiBfdGhpcy5xdWVzdGlvblNsdWcKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICJZb3UgY2FuJ3Qgc3VibWl0IGFuIGVtcHR5IGFuc3dlciEiOwogICAgICB9CiAgICB9CiAgfSwKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgZW5kcG9pbnQsIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBlbmRwb2ludCA9ICIvYXBpL2Fuc3dlcnMvIi5jb25jYXQodG8ucGFyYW1zLmlkLCAiLyIpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBhcGlTZXJ2aWNlKGVuZHBvaW50KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0by5wYXJhbXMucHJldmlvdXNBbnN3ZXIgPSBkYXRhLmJvZHk7CiAgICAgICAgICAgICAgdG8ucGFyYW1zLnF1ZXN0aW9uU2x1ZyA9IGRhdGEucXVlc3Rpb25fc2x1ZzsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0gLy8gYXN5bmMgYmVmb3JlUm91dGVFbnRlciAodG8sIGZyb20sIG5leHQpewogIC8vICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvYW5zd2Vycy8ke3RvLnBhcmFtcy5pZH0vYDsKICAvLyAgIGxldCBkYXRhID0gYXdhaXQgYXBpU2VydmljZShlbmRwb2ludCk7CiAgLy8gICByZXR1cm4gbmV4dCh2bT0+ewogIC8vICAgICB2bS5hbnN3ZXJCb2R5ID0gZGF0YS5ib2R5LAogIC8vICAgICB2bS5xdWVzdGlvblNsdWcgPSBkYXRhLnF1ZXN0aW9uX3NsdWcKICAvLyAgIH0pCiAgLy8gfQoKfTs="},{"version":3,"sources":["AnswerEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,SAAA,UAAA,QAAA,yBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AATA,GAFA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KAAA,cADA;AAEA,MAAA,KAAA,EAAA;AAFA,KAAA;AAIA,GAtBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,QAAA,0BAAA,KAAA,EAAA,MAAA;AACA,QAAA,UAAA,CAAA,QAAA,EAAA,KAAA,EAAA;AAAA,UAAA,IAAA,EAAA,KAAA;AAAA,SAAA,CAAA,CACA,IADA,CACA,YAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,UADA;AAEA,YAAA,MAAA,EAAA;AAAA,cAAA,IAAA,EAAA,KAAA,CAAA;AAAA;AAFA,WAAA;AAIA,SANA;AAOA,OATA,MASA;AACA,aAAA,KAAA,GAAA,mCAAA;AACA;AACA;AAdA,GAxBA;AAyCA,EAAA,gBAzCA,4BAyCA,EAzCA,EAyCA,IAzCA,EAyCA,IAzCA,EAyCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,QADA,0BACA,EAAA,CAAA,MAAA,CAAA,EADA;AAAA;AAAA,qBAEA,UAAA,CAAA,QAAA,CAFA;;AAAA;AAEA,cAAA,IAFA;AAGA,cAAA,EAAA,CAAA,MAAA,CAAA,cAAA,GAAA,IAAA,CAAA,IAAA;AACA,cAAA,EAAA,CAAA,MAAA,CAAA,YAAA,GAAA,IAAA,CAAA,aAAA;AAJA,+CAKA,IAAA,EALA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,GA/CA,CAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvDA,CAAA","sourcesContent":["<template>\r\n\r\n  <div class=\"container mt-2\">\r\n    <h1 class=\"mb-2\"> Edit your Answer </h1>\r\n    <form @submit.prevent=\"onSubmit\">\r\n      <textarea\r\n            v-model=\"answerBody\"\r\n            rows=\"3\"\r\n            class=\"form-control\"\r\n      > </textarea>\r\n      <br>\r\n      <button\r\n            type=\"submit\"\r\n            class=\"btn btn-success\"\r\n            >Publish your Answer\r\n      </button>\r\n    </form>\r\n\r\n    <p v-if=\"error\" class=\"muted mt-2\" > {{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\"\r\n\r\nexport default {\r\n  name: \"AnswerEditor\",\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    previousAnswer: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    questionSlug: {\r\n      type: String,\r\n      required: true,\r\n    }\r\n  },\r\n\r\n  data (){\r\n    return {\r\n      answerBody: this.previousAnswer,\r\n      error: null,\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    onSubmit () {\r\n      if(this.answerBody){\r\n        let endpoint = `/api/answers/${this.id}/`;\r\n        apiService(endpoint, \"PUT\", { body: this.answerBody })\r\n            .then(() => {\r\n              this.$router.push({\r\n                name: \"question\",\r\n                params: { slug: this.questionSlug }\r\n              })\r\n            })\r\n      } else {\r\n        this.error = \"You can't submit an empty answer!\";\r\n      }\r\n    }\r\n  },\r\n\r\n  async beforeRouteEnter (to, from, next){\r\n    let endpoint = `/api/answers/${to.params.id}/`;\r\n    let data = await apiService(endpoint);\r\n    to.params.previousAnswer = data.body;\r\n    to.params.questionSlug = data.question_slug;\r\n    return next()\r\n  }\r\n  // async beforeRouteEnter (to, from, next){\r\n  //   let endpoint = `/api/answers/${to.params.id}/`;\r\n  //   let data = await apiService(endpoint);\r\n  //   return next(vm=>{\r\n  //     vm.answerBody = data.body,\r\n  //     vm.questionSlug = data.question_slug\r\n  //   })\r\n  // }\r\n\r\n}\r\n\r\n</script>\r\n"],"sourceRoot":"src/views"}]}